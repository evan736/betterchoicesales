(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[173],{7653:function(e,t,l){"use strict";l.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.316.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,l(4297).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},4622:function(e,t,l){"use strict";l.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.316.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,l(4297).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},3217:function(e,t,l){"use strict";l.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.316.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,l(4297).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},1012:function(e,t,l){"use strict";l.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.316.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,l(4297).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3718:function(e,t,l){"use strict";l.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.316.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,l(4297).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},1352:function(e,t,l){"use strict";l.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.316.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,l(4297).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},3129:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sales",function(){return l(7881)}])},7881:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return N}});var a=l(5893),s=l(7294),i=l(1163),n=l(9835),r=l(3740),c=l(8856),d=l(8142),o=l(1012),m=l(4622),u=l(8971),x=l(3766),p=l(3718),h=l(1352),b=l(3742),v=l(4297);/**
 * @license lucide-react v0.316.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let g=(0,v.Z)("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);var f=l(7653);/**
 * @license lucide-react v0.316.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let j=(0,v.Z)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);var y=l(3217);function N(){var e,t,l;let{user:p,loading:h}=(0,n.a)(),b=(0,i.useRouter)(),[v,g]=(0,s.useState)([]),[f,j]=(0,s.useState)(!1),[y,N]=(0,s.useState)(!0),[w,C]=(0,s.useState)({lead_sources:[],carriers:[]}),[S,D]=(0,s.useState)("all"),[F,P]=(0,s.useState)(""),[z,E]=(0,s.useState)(""),[T,Z]=(0,s.useState)(!1),M=(0,s.useMemo)(()=>(function(){let e=[],t=new Date;for(let l=0;l<12;l++){let a=new Date(t.getFullYear(),t.getMonth()-l,1),s=new Date(a.getFullYear(),a.getMonth()+1,0),i=a.toLocaleDateString("en-US",{month:"long",year:"numeric"});e.push({value:"".concat(a.getFullYear(),"-").concat(String(a.getMonth()+1).padStart(2,"0")),label:i,from:a.toISOString().slice(0,10),to:s.toISOString().slice(0,10)})}return e})(),[]);(0,s.useEffect)(()=>{h||p?p&&(A(),L()):b.push("/")},[p,h]);let L=async()=>{try{let e=await c.Sb.dropdownOptions();C(e.data)}catch(e){console.error("Failed to load dropdown options:",e)}},A=async(e,t)=>{N(!0);try{let l={},a=null!=e?e:F,s=null!=t?t:z;a&&(l.date_from=a),s&&(l.date_to=s);let i=await c.Tp.list(l);g(i.data)}catch(e){console.error("Failed to load sales:",e)}finally{N(!1)}},I=e=>{let t=function(e){let t=new Date,l=t.getFullYear(),a=t.getMonth(),s=e=>e.toISOString().slice(0,10),i=(e,t)=>new Date(e,t,1),n=(e,t)=>new Date(e,t+1,0);switch(e){case"this_month":return{from:s(i(l,a)),to:s(n(l,a)),label:"This Month"};case"last_month":return{from:s(i(0===a?l-1:l,0===a?11:a-1)),to:s(n(0===a?l-1:l,0===a?11:a-1)),label:"Last Month"};case"this_year":return{from:s(i(l,0)),to:s(n(l,11)),label:"This Year"};case"last_year":return{from:s(i(l-1,0)),to:s(n(l-1,11)),label:"Last Year"};default:return{from:"",to:"",label:"All Time"}}}(e);D(e),P(t.from),E(t.to),Z(!1),A(t.from,t.to)},W=(e,t,l)=>{D(l),P(e),E(t),Z(!1),A(e,t)},O=v.reduce((e,t)=>e+parseFloat(t.written_premium||0),0),U=v.length,[B,q]=(0,s.useState)(null),[R,Y]=(0,s.useState)(!1),G=async e=>{var t,l,a;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(s){Y(!0),q(null);try{let e=await c.Tp.importCSV(s);q(e.data),A(F,z)}catch(e){alert((null===(a=e.response)||void 0===a?void 0:null===(l=a.data)||void 0===l?void 0:l.detail)||"Import failed")}finally{Y(!1),e.target.value=""}}};return h||!p?null:(0,a.jsxs)("div",{className:"min-h-screen bg-slate-50",children:[(0,a.jsx)(r.Z,{}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"font-display text-4xl font-bold text-slate-900 mb-1",children:"Sales"}),(0,a.jsx)("p",{className:"text-slate-600",children:"Manage your policy sales and applications"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(null===(e=p.role)||void 0===e?void 0:e.toLowerCase())==="admin"&&(0,a.jsxs)("label",{className:"inline-flex items-center space-x-2 bg-white border-2 border-slate-300 hover:border-blue-500 text-slate-700 font-semibold px-4 py-2 rounded-lg cursor-pointer transition-colors text-sm",children:[(0,a.jsx)(d.Z,{size:18}),(0,a.jsx)("span",{children:R?"Importing...":"Import CSV"}),(0,a.jsx)("input",{type:"file",accept:".csv",onChange:G,className:"hidden",disabled:R})]}),(0,a.jsxs)("button",{onClick:()=>j(!0),className:"btn-primary flex items-center space-x-2",children:[(0,a.jsx)(o.Z,{size:20}),(0,a.jsx)("span",{children:"New Sale"})]})]})]}),B&&(0,a.jsx)("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,a.jsxs)("p",{className:"font-semibold text-green-800",children:["Import complete: ",B.created," created, ",B.skipped," skipped",(null===(t=B.errors)||void 0===t?void 0:t.length)>0&&", ".concat(B.errors.length," errors")]})}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-3 mb-6",children:(0,a.jsxs)("div",{className:"flex items-center flex-wrap gap-2",children:[[{key:"this_month",label:"This Month"},{key:"last_month",label:"Last Month"},{key:"this_year",label:"This Year"},{key:"all",label:"All Time"}].map(e=>{let{key:t,label:l}=e;return(0,a.jsx)("button",{onClick:()=>I(t),className:"px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ".concat(S===t?"bg-blue-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"),children:l},t)}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>Z(!T),className:"flex items-center space-x-1 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ".concat(M.some(e=>e.value===S)?"bg-blue-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"),children:[(0,a.jsx)(m.Z,{size:14}),(0,a.jsx)("span",{children:(null===(l=M.find(e=>e.value===S))||void 0===l?void 0:l.label)||"Pick Month"}),(0,a.jsx)(u.Z,{size:14})]}),T&&(0,a.jsx)("div",{className:"absolute top-full left-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-lg z-20 w-48 max-h-64 overflow-y-auto",children:M.map(e=>(0,a.jsx)("button",{onClick:()=>W(e.from,e.to,e.value),className:"w-full text-left px-3 py-2 text-sm hover:bg-blue-50 ".concat(S===e.value?"bg-blue-50 text-blue-700 font-semibold":"text-slate-700"),children:e.label},e.value))})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1 ml-auto",children:[(0,a.jsx)("input",{type:"date",value:F,onChange:e=>P(e.target.value),className:"border border-slate-300 rounded-lg px-2 py-1.5 text-sm w-36"}),(0,a.jsx)("span",{className:"text-slate-400 text-sm",children:"to"}),(0,a.jsx)("input",{type:"date",value:z,onChange:e=>E(e.target.value),className:"border border-slate-300 rounded-lg px-2 py-1.5 text-sm w-36"}),(0,a.jsx)("button",{onClick:()=>{D("custom"),Z(!1),A(F,z)},className:"px-3 py-1.5 bg-slate-700 text-white rounded-lg text-sm font-medium hover:bg-slate-800",children:"Apply"})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 p-3 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-slate-900",children:U}),(0,a.jsx)("div",{className:"text-xs text-slate-500",children:"Total Sales"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 p-3 text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-green-700",children:["$",O.toLocaleString(void 0,{minimumFractionDigits:0})]}),(0,a.jsx)("div",{className:"text-xs text-slate-500",children:"Written Premium"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 p-3 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-slate-900",children:v.filter(e=>"bundled"===e.policy_type).length}),(0,a.jsx)("div",{className:"text-xs text-slate-500",children:"Bundles"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-slate-200 p-3 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-slate-900",children:v.reduce((e,t)=>e+(t.item_count||1),0)}),(0,a.jsx)("div",{className:"text-xs text-slate-500",children:"Total Items"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-green-200 p-3 text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-green-700",children:["$",v.filter(e=>"paid"===e.commission_status).reduce((e,t)=>e+parseFloat(t.written_premium||0),0).toLocaleString(void 0,{minimumFractionDigits:0})]}),(0,a.jsx)("div",{className:"text-xs text-green-600",children:"Commission Paid"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-amber-200 p-3 text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-amber-600",children:["$",v.filter(e=>"paid"!==e.commission_status).reduce((e,t)=>e+parseFloat(t.written_premium||0),0).toLocaleString(void 0,{minimumFractionDigits:0})]}),(0,a.jsx)("div",{className:"text-xs text-amber-600",children:"Commission Pending"})]})]}),U>0&&(()=>{let e=v.filter(e=>"paid"===e.commission_status).length,t=Math.round(e/U*100);return(0,a.jsxs)("div",{className:"mb-6 bg-white rounded-lg border border-slate-200 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-semibold text-slate-700",children:"Commission Payment Progress"}),(0,a.jsxs)("span",{className:"text-sm text-slate-500",children:[e," of ",U," policies paid (",t,"%)"]})]}),(0,a.jsx)("div",{className:"w-full bg-slate-200 rounded-full h-3",children:(0,a.jsx)("div",{className:"bg-green-500 h-3 rounded-full transition-all duration-500",style:{width:"".concat(t,"%")}})})]})})(),y?(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("div",{className:"animate-pulse text-brand-600 font-semibold",children:"Loading sales..."})}):0===v.length?(0,a.jsxs)("div",{className:"card text-center py-12",children:[(0,a.jsx)(x.Z,{size:64,className:"mx-auto mb-4 text-slate-300"}),(0,a.jsx)("h3",{className:"font-display text-2xl font-bold text-slate-900 mb-2",children:"No sales yet"}),(0,a.jsx)("p",{className:"text-slate-600 mb-6",children:"Get started by uploading a PDF application"}),(0,a.jsx)("button",{onClick:()=>j(!0),className:"btn-primary",children:"Create Your First Sale"})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4",children:v.map(e=>(0,a.jsx)(_,{sale:e,onUpdate:A},e.id))}),f&&(0,a.jsx)(k,{onClose:()=>j(!1),onSuccess:()=>{j(!1),A()},dropdownOptions:w})]})]})}let _=e=>{let{sale:t,onUpdate:l}=e,[i,n]=(0,s.useState)(!1),[r,d]=(0,s.useState)(!1),[o,m]=(0,s.useState)(t.signature_status||"not_sent"),[u,h]=(0,s.useState)(!1),[b,v]=(0,s.useState)(t.welcome_email_sent||!1),[g,f]=(0,s.useState)(!1),[j,y]=(0,s.useState)(""),[N,_]=(0,s.useState)(!1),[k,C]=(0,s.useState)(t.client_email||""),S=async()=>{if(!j.trim()||!j.includes("@")){alert("Please enter a valid email address");return}_(!0);try{await c.Tp.update(t.id,{client_email:j.trim()}),C(j.trim()),t.client_email=j.trim(),f(!1),y(""),l()}catch(t){var e,a;alert((null===(a=t.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.detail)||"Failed to save email")}finally{_(!1)}},D=async()=>{if(confirm("Delete sale for ".concat(t.client_name," (").concat(t.policy_number,")?"))){n(!0);try{await c.Tp.delete(t.id),l()}catch(t){var e,a;alert((null===(a=t.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.detail)||"Failed to delete sale")}finally{n(!1)}}},F=async()=>{if(!k){alert("Client email is required to send for signature");return}let e=!!t.application_pdf_path,a=async e=>{var a,s,i,n;d(!0);try{let s=await c.Tp.sendForSignature(t.id,e),i=null===(a=s.data)||void 0===a?void 0:a.send_url;m("draft"),i?(window.open(i,"_blank"),alert("BoldSign opened in a new tab. Place the signature fields on the PDF and click Send.")):alert("Document created but no BoldSign URL returned. Check the BoldSign dashboard."),l()}catch(t){console.error("Send for signature error:",t);let e="Unknown error";if("ECONNABORTED"===t.code||(null===(s=t.message)||void 0===s?void 0:s.includes("timeout")))e="Request timed out. The PDF may be too large. Try a smaller file.";else if(null===(n=t.response)||void 0===n?void 0:null===(i=n.data)||void 0===i?void 0:i.detail){let l=t.response.data.detail;e="object"==typeof l?JSON.stringify(l):l}else t.message&&(e=t.message);alert("Error sending for signature: ".concat(e))}finally{d(!1)}};if(e){if(!confirm("Open BoldSign to place signature fields for ".concat(k,"?")))return;await a()}else{let e=document.createElement("input");e.type="file",e.accept=".pdf",e.onchange=async e=>{var t;let l=null===(t=e.target.files)||void 0===t?void 0:t[0];l&&confirm('Upload "'.concat(l.name,'" and open BoldSign to place signature fields for ').concat(k,"?"))&&await a(l)},e.click()}},P=async()=>{try{let e=await c.Tp.signatureStatus(t.id);m(e.data.status),"completed"===e.data.status?(alert("✓ Document has been signed!"),l()):"sent"===e.data.status?alert("⏳ Waiting for signature..."):"declined"===e.data.status?alert("✗ Signer declined"):alert("Status: ".concat(e.data.status))}catch(e){alert("Failed to check status")}};return(0,a.jsx)("div",{className:"card hover:shadow-xl transition-shadow",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,a.jsx)("h3",{className:"font-display text-xl font-bold text-slate-900",children:t.client_name}),(0,a.jsx)("span",{className:"badge ".concat("active"===t.status?"badge-success":"pending"===t.status?"badge-warning":"badge-danger"),children:t.status}),"paid"===t.commission_status?(0,a.jsx)("span",{className:"badge bg-green-100 text-green-700",children:"\uD83D\uDCB0 Comm Paid"}):(0,a.jsx)("span",{className:"badge bg-amber-100 text-amber-700",children:"⏳ Comm Pending"}),t.welcome_email_sent&&(0,a.jsx)("span",{className:"badge bg-purple-100 text-purple-700",children:"\uD83D\uDCE7 Welcome Sent"}),t.policy_type&&(0,a.jsx)("span",{className:"badge bg-blue-100 text-blue-800 capitalize",children:t.policy_type.replace(/_/g," ")}),(()=>{switch(o){case"draft":return(0,a.jsx)("span",{className:"badge bg-blue-100 text-blue-800",children:"\uD83D\uDCDD Draft - Place Fields"});case"sent":return(0,a.jsx)("span",{className:"badge bg-yellow-100 text-yellow-800",children:"⏳ Awaiting Signature"});case"completed":return(0,a.jsx)("span",{className:"badge bg-green-100 text-green-800",children:"✓ Signed"});case"declined":return(0,a.jsx)("span",{className:"badge bg-red-100 text-red-800",children:"✗ Declined"});default:return null}})()]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-2",children:[(0,a.jsx)(w,{label:"Policy #",value:t.policy_number}),(0,a.jsx)(w,{label:"Premium",value:"$".concat(parseFloat(t.written_premium).toLocaleString())}),(0,a.jsx)(w,{label:"Carrier",value:t.carrier||"—"}),(0,a.jsx)(w,{label:"Items",value:t.item_count}),(0,a.jsx)(w,{label:"Lead Source",value:(t.lead_source||"").replace(/_/g," ")}),(0,a.jsx)(w,{label:"State",value:t.state||"—"}),(0,a.jsx)(w,{label:"Email",value:k||"—"}),(0,a.jsx)(w,{label:"Phone",value:t.client_phone||"—"})]}),!k&&(0,a.jsx)("div",{className:"mt-2 mb-1",children:g?(0,a.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-amber-50 border border-amber-200 rounded-lg",children:[(0,a.jsx)("span",{className:"text-amber-600 text-sm",children:"\uD83D\uDCE7"}),(0,a.jsx)("input",{type:"email",value:j,onChange:e=>y(e.target.value),placeholder:"client@email.com",className:"flex-1 border border-amber-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none bg-white",onKeyDown:e=>"Enter"===e.key&&S(),autoFocus:!0}),(0,a.jsx)("button",{onClick:S,disabled:N,className:"px-3 py-1.5 bg-amber-600 text-white rounded-md text-sm font-semibold hover:bg-amber-700 disabled:opacity-50",children:N?"...":"Save"}),(0,a.jsx)("button",{onClick:()=>{f(!1),y("")},className:"px-2 py-1.5 text-slate-400 hover:text-slate-600 text-sm",children:"✕"})]}):(0,a.jsxs)("button",{onClick:()=>f(!0),className:"flex items-center gap-1.5 text-sm text-amber-700 hover:text-amber-800 font-semibold bg-amber-50 hover:bg-amber-100 border border-amber-200 rounded-lg px-3 py-1.5 transition-all",children:[(0,a.jsx)("span",{children:"⚠️"})," Add Email — required for welcome email & e-sign"]})})]}),(0,a.jsxs)("div",{className:"ml-4 flex flex-col gap-2",children:[k&&"completed"!==o&&(0,a.jsxs)("button",{onClick:F,disabled:r,className:"flex items-center space-x-2 px-3 py-2 rounded-lg bg-brand-600 text-white hover:bg-brand-700 transition-all text-sm font-semibold",children:[(0,a.jsx)(x.Z,{size:16}),(0,a.jsx)("span",{children:r?"Uploading...":"sent"===o||"draft"===o?"Resend for Signature":"Send for Signature"})]}),("sent"===o||"draft"===o)&&(0,a.jsx)("button",{onClick:P,className:"flex items-center space-x-2 px-3 py-2 rounded-lg border border-yellow-300 text-yellow-700 hover:bg-yellow-50 transition-all text-sm font-semibold",children:(0,a.jsx)("span",{children:"Check Status"})}),k&&(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("button",{onClick:async()=>{let e=!!t.application_pdf_path,l=["Send without attachment"];e&&l.push("Attach saved application PDF"),l.push("Attach a different PDF...");let a=l.map((e,t)=>"".concat(t+1,". ").concat(e)).join("\n"),s=prompt("Send welcome email to ".concat(k,"?\n\n").concat(a,"\n\nEnter choice (1-").concat(l.length,"):"),"1");if(!s)return;let i=parseInt(s.trim(),10);if(!isNaN(i)&&!(i<1)&&!(i>l.length)){h(!0);try{if(1===i)await c.zG.sendWelcome(t.id);else if(e&&2===i)await c.zG.sendWelcome(t.id,{attachSavedPdf:!0});else{let e=await new Promise(e=>{let t=document.createElement("input");t.type="file",t.accept=".pdf",t.onchange=t=>{var l;return e((null===(l=t.target.files)||void 0===l?void 0:l[0])||null)},t.click()});if(!e){h(!1);return}await c.zG.sendWelcome(t.id,{file:e})}v(!0),alert("Welcome email sent!")}catch(e){var n,r;alert((null===(r=e.response)||void 0===r?void 0:null===(n=r.data)||void 0===n?void 0:n.detail)||"Failed to send welcome email")}finally{h(!1)}}},disabled:u,className:"flex items-center space-x-2 px-3 py-2 rounded-lg text-sm font-semibold transition-all ".concat(b?"border border-green-200 text-green-700 bg-green-50":"border border-purple-200 text-purple-700 hover:bg-purple-50"),children:(0,a.jsx)("span",{children:u?"Sending...":b?"✓ Welcome Sent":"\uD83D\uDCE7 Send Welcome Email"})})}),(0,a.jsxs)("button",{onClick:D,disabled:i,className:"flex items-center space-x-2 px-3 py-2 rounded-lg border border-red-200 text-red-600 hover:bg-red-50 hover:border-red-400 transition-all text-sm font-semibold",children:[(0,a.jsx)(p.Z,{size:16}),(0,a.jsx)("span",{children:i?"...":"Delete"})]})]})]})})},w=e=>{let{label:t,value:l}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-slate-500 font-medium mb-0.5",children:t}),(0,a.jsx)("div",{className:"text-sm font-semibold text-slate-900 capitalize",children:l})]})},k=e=>{var t;let{onClose:l,onSuccess:i,dropdownOptions:n}=e,[r,d]=(0,s.useState)("upload"),[o,m]=(0,s.useState)(null),[u,x]=(0,s.useState)("referral"),[p,v]=(0,s.useState)(!1),[N,_]=(0,s.useState)(""),[w,k]=(0,s.useState)(null),[C,S]=(0,s.useState)([]),[D,F]=(0,s.useState)({client_name:"",client_email:"",client_phone:"",carrier:"",state:""}),[P,z]=(0,s.useState)(!1),[E,T]=(0,s.useState)([]),[Z,M]=(0,s.useState)(!1),[L,A]=(0,s.useState)("none"),[I,W]=(0,s.useState)(null),O=(0,s.useCallback)(e=>{e.preventDefault(),M(!0)},[]),U=(0,s.useCallback)(()=>M(!1),[]),B=(0,s.useCallback)(e=>{e.preventDefault(),M(!1);let t=e.dataTransfer.files[0];(null==t?void 0:t.type)==="application/pdf"?m(t):_("Please upload a PDF file")},[]),q=async()=>{if(o){v(!0),_("");try{let e=(await c.Tp.extractPDF(o)).data.data;k(e),F({client_name:e.client_name||"",client_email:e.client_email||"",client_phone:e.client_phone||"",carrier:e.carrier||"",state:e.state||""});let t=(e.policies||[]).map((e,t)=>({...e,policy_number:e.policy_number||"",written_premium:e.written_premium||0,item_count:e.item_count||1,policy_type:e.policy_type||"other",include:!0}));S(t.length>0?t:[{policy_number:"",policy_type:"auto",written_premium:e.total_premium||0,item_count:e.total_items||1,effective_date:null,notes:"",include:!0}]),d("review")}catch(l){var e,t;_((null===(t=l.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.detail)||"Failed to extract PDF data. Please try again or enter manually.")}finally{v(!1)}}},R=async()=>{var e,t,l,a,s;z(!0);let n=[],r=C.filter(e=>e.include),d={};for(let l of r){let a=l.policy_number;if(!a){alert("Please enter a policy number for all policies"),z(!1);return}void 0!==d[a]?(d[a]++,l._saveNumber="".concat(a,"-").concat((null===(t=l.policy_type)||void 0===t?void 0:null===(e=t.toUpperCase())||void 0===e?void 0:e.slice(0,3))||d[a])):(d[a]=0,l._saveNumber=a)}let m=[];for(let e of r)try{let t=e.effective_date||void 0;t&&"string"==typeof t&&!t.includes("T")&&(t="".concat(t,"T00:00:00"));let a=await c.Tp.createFromPdf({policy_number:e._saveNumber||e.policy_number,written_premium:parseFloat(e.written_premium)||0,lead_source:u,policy_type:e.policy_type||void 0,carrier:D.carrier||void 0,state:D.state||void 0,client_name:D.client_name,client_email:D.client_email||void 0,client_phone:D.client_phone||void 0,item_count:parseInt(e.item_count)||1,effective_date:t,notes:e.notes||void 0}),s=null===(l=a.data.sale)||void 0===l?void 0:l.id;if(s&&o)try{await c.Tp.uploadPDF(s,o)}catch(e){console.warn("PDF upload failed but sale was created:",e)}s&&m.push(s),n.push({success:!0,policy:e._saveNumber||e.policy_number,household:a.data.household,saleId:s})}catch(i){let t=null===(s=i.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.detail,l="object"==typeof t?JSON.stringify(t):t||"Failed to save";n.push({success:!1,policy:e._saveNumber||e.policy_number,error:l})}if(T(n),D.client_email&&m.length>0){let e=m[0];try{"application"===L&&o?await c.zG.sendWelcome(e,{file:o}):"custom"===L&&I?await c.zG.sendWelcome(e,{file:I}):await c.zG.sendWelcome(e)}catch(e){console.warn("Welcome email failed but sale was created:",e)}}n.some(e=>e.success)&&n.every(e=>e.success)&&setTimeout(()=>i(),1500),z(!1)},[Y,G]=(0,s.useState)({policy_number:"",written_premium:"",lead_source:"referral",policy_type:"",carrier:"",state:"",client_name:"",client_email:"",client_phone:"",item_count:1,notes:""}),$=async e=>{e.preventDefault(),z(!0);try{await c.Tp.create({...Y,written_premium:parseFloat(Y.written_premium),policy_type:Y.policy_type||void 0,carrier:Y.carrier||void 0,state:Y.state||void 0}),i()}catch(e){var t,l;_((null===(l=e.response)||void 0===l?void 0:null===(t=l.data)||void 0===t?void 0:t.detail)||"Failed to create sale")}finally{z(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between z-10",children:[(0,a.jsx)("h2",{className:"font-display text-2xl font-bold text-slate-900",children:"upload"===r?"New Sale — Upload Application":"review"===r?"Review Extracted Data":"Manual Entry"}),(0,a.jsx)("button",{onClick:l,className:"text-slate-400 hover:text-slate-600",children:(0,a.jsx)(h.Z,{size:24})})]}),(0,a.jsxs)("div",{className:"p-6",children:["upload"===r&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{onDragOver:O,onDragLeave:U,onDrop:B,className:"border-2 border-dashed rounded-xl p-10 text-center transition-all cursor-pointer ".concat(Z?"border-brand-500 bg-brand-50":o?"border-green-400 bg-green-50":"border-slate-300 hover:border-brand-400 hover:bg-slate-50"),onClick:()=>{var e;return null===(e=document.getElementById("pdf-input"))||void 0===e?void 0:e.click()},children:[(0,a.jsx)("input",{id:"pdf-input",type:"file",accept:".pdf",onChange:e=>{var t;let l=null===(t=e.target.files)||void 0===t?void 0:t[0];l&&m(l)},className:"hidden"}),o?(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)(b.Z,{size:48,className:"text-green-500 mb-3"}),(0,a.jsx)("p",{className:"font-bold text-green-700 text-lg",children:o.name}),(0,a.jsxs)("p",{className:"text-green-600 text-sm mt-1",children:[(o.size/1024).toFixed(0)," KB — Ready to extract"]}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),m(null)},className:"mt-3 text-sm text-red-500 hover:text-red-700",children:"Remove"})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)(g,{size:48,className:"text-slate-400 mb-3"}),(0,a.jsx)("p",{className:"font-bold text-slate-700 text-lg",children:"Drag & drop your PDF application here"}),(0,a.jsx)("p",{className:"text-slate-500 text-sm mt-1",children:"or click to browse"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Lead Source *"}),(0,a.jsxs)("select",{value:u,onChange:e=>x(e.target.value),className:"input-field",children:[((null==n?void 0:n.lead_sources)||[]).map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value)),!(null==n?void 0:null===(t=n.lead_sources)||void 0===t?void 0:t.length)&&(0,a.jsx)("option",{value:"referral",children:"Referral"})]})]}),N&&(0,a.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[(0,a.jsx)(f.Z,{size:20,className:"text-red-500 mt-0.5 shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-red-800 text-sm",children:N}),(0,a.jsx)("button",{onClick:()=>{_(""),d("manual")},className:"text-red-600 text-sm font-semibold mt-1 hover:underline",children:"Enter manually instead →"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-slate-200",children:[(0,a.jsxs)("button",{onClick:()=>d("manual"),className:"text-brand-600 hover:text-brand-700 font-semibold text-sm",children:[(0,a.jsx)(j,{size:16,className:"inline mr-1"})," Enter manually"]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:l,className:"btn-secondary",children:"Cancel"}),(0,a.jsx)("button",{onClick:q,disabled:!o||p,className:"btn-primary flex items-center gap-2",children:p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.Z,{size:18,className:"animate-spin"})," Analyzing PDF..."]}):(0,a.jsx)(a.Fragment,{children:"Submit"})})]})]})]}),"review"===r&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-blue-800",children:"Review the extracted data below. Edit any fields that need correction, then save."}),(0,a.jsxs)("div",{className:"card bg-slate-50",children:[(0,a.jsx)("h3",{className:"font-bold text-slate-900 mb-3",children:"Client Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Client Name *"}),(0,a.jsx)("input",{value:D.client_name,onChange:e=>F({...D,client_name:e.target.value}),className:"input-field",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Carrier"}),(0,a.jsx)("input",{value:D.carrier,onChange:e=>F({...D,carrier:e.target.value}),className:"input-field"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Email"}),(0,a.jsx)("input",{value:D.client_email,onChange:e=>F({...D,client_email:e.target.value}),className:"input-field"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Phone"}),(0,a.jsx)("input",{value:D.client_phone,onChange:e=>F({...D,client_phone:e.target.value}),className:"input-field"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"State"}),(0,a.jsx)("input",{value:D.state,onChange:e=>F({...D,state:e.target.value.toUpperCase().slice(0,2)}),className:"input-field",maxLength:2})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Lead Source"}),(0,a.jsx)("select",{value:u,onChange:e=>x(e.target.value),className:"input-field capitalize",children:((null==n?void 0:n.lead_sources)||[]).map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-bold text-slate-900 mb-3",children:["Policies Found (",C.filter(e=>e.include).length,")"]}),(0,a.jsx)("div",{className:"space-y-4",children:C.map((e,t)=>(0,a.jsxs)("div",{className:"card border-2 ".concat(e.include?"border-brand-200":"border-slate-200 opacity-50"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:e.include,onChange:()=>{let e=[...C];e[t].include=!e[t].include,S(e)},className:"w-4 h-4 rounded border-slate-300"}),(0,a.jsx)("span",{className:"font-bold text-slate-900 capitalize",children:(e.policy_type||"policy").replace(/_/g," ")})]}),e.notes&&(0,a.jsx)("span",{className:"text-xs text-slate-500",children:e.notes})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Policy # *"}),(0,a.jsx)("input",{value:e.policy_number,onChange:e=>{let l=[...C];l[t].policy_number=e.target.value,S(l)},className:"input-field",placeholder:"Enter policy number"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Type"}),(0,a.jsx)("select",{value:e.policy_type,onChange:e=>{let l=[...C];l[t].policy_type=e.target.value,S(l)},className:"input-field capitalize",children:["auto","home","renters","condo","landlord","umbrella","motorcycle","boat","rv","life","health","bundled","commercial","other"].map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Premium"}),(0,a.jsx)("input",{type:"number",step:"0.01",value:e.written_premium,onChange:e=>{let l=[...C];l[t].written_premium=e.target.value,S(l)},className:"input-field"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Items"}),(0,a.jsx)("input",{type:"number",min:"1",value:e.item_count,onChange:e=>{let l=[...C];l[t].item_count=e.target.value,S(l)},className:"input-field"})]})]})]},t))}),(0,a.jsx)("div",{className:"mt-4 p-4 bg-brand-50 rounded-lg border border-brand-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"font-bold text-brand-900",children:["Total: ",C.filter(e=>e.include).length," ",1===C.filter(e=>e.include).length?"policy":"policies",","," ",C.filter(e=>e.include).reduce((e,t)=>e+(parseInt(t.item_count)||1),0)," items"]}),(0,a.jsxs)("span",{className:"font-bold text-brand-700 text-lg",children:["$",C.filter(e=>e.include).reduce((e,t)=>e+(parseFloat(t.written_premium)||0),0).toLocaleString()]})]})})]}),E.length>0&&(0,a.jsx)("div",{className:"space-y-2",children:E.map((e,t)=>{var l;return(0,a.jsxs)("div",{className:"p-3 rounded-lg text-sm ".concat(e.success?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"),children:[e.success?"✓ ".concat(e.policy," saved"):"✗ ".concat(e.policy,": ").concat(e.error),(null===(l=e.household)||void 0===l?void 0:l.is_bundle)&&(0,a.jsxs)("span",{className:"ml-2 font-semibold",children:["\uD83D\uDCE6 Household: ",e.household.total_items," items, $",e.household.total_premium.toLocaleString()]})]},t)})}),D.client_email?(0,a.jsxs)("div",{className:"card bg-purple-50 border border-purple-200",children:[(0,a.jsx)("h3",{className:"font-bold text-purple-900 mb-2",children:"\uD83D\uDCE7 Welcome Email"}),(0,a.jsxs)("p",{className:"text-sm text-purple-700 mb-3",children:["A welcome email will be sent to ",(0,a.jsx)("strong",{children:D.client_email})," when you save."]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer text-sm",children:[(0,a.jsx)("input",{type:"radio",name:"welcomeAttach",value:"none",checked:"none"===L,onChange:()=>{A("none"),W(null)},className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-slate-700",children:"No attachment"})]}),o&&(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer text-sm",children:[(0,a.jsx)("input",{type:"radio",name:"welcomeAttach",value:"application",checked:"application"===L,onChange:()=>{A("application"),W(null)},className:"w-4 h-4"}),(0,a.jsxs)("span",{className:"text-slate-700",children:["Attach uploaded application ",(0,a.jsxs)("span",{className:"text-purple-600 font-medium",children:["(",o.name,")"]})]})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer text-sm",children:[(0,a.jsx)("input",{type:"radio",name:"welcomeAttach",value:"custom",checked:"custom"===L,onChange:()=>A("custom"),className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-slate-700",children:"Attach a different PDF"})]}),"custom"===L&&(0,a.jsx)("div",{className:"ml-6 mt-1",children:(0,a.jsx)("input",{type:"file",accept:".pdf",onChange:e=>{var t;return W((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},className:"text-sm text-slate-600 file:mr-3 file:py-1.5 file:px-3 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-purple-100 file:text-purple-700 hover:file:bg-purple-200"})})]})]}):(0,a.jsxs)("div",{className:"card bg-amber-50 border border-amber-300",children:[(0,a.jsx)("h3",{className:"font-bold text-amber-900 mb-2",children:"⚠️ No Client Email"}),(0,a.jsx)("p",{className:"text-sm text-amber-700 mb-3",children:"Add a client email above to send a welcome email with their policy details, survey link, and carrier resources."}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("input",{type:"email",placeholder:"client@email.com",value:D.client_email,onChange:e=>F({...D,client_email:e.target.value}),className:"flex-1 border border-amber-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none bg-white"})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-slate-200",children:[(0,a.jsx)("button",{onClick:()=>d("upload"),className:"btn-secondary",children:"← Back"}),(0,a.jsx)("button",{onClick:R,disabled:P,className:"btn-primary flex items-center gap-2",children:P?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.Z,{size:18,className:"animate-spin"})," Saving..."]}):(0,a.jsxs)(a.Fragment,{children:["Save ",C.filter(e=>e.include).length," ",1===C.filter(e=>e.include).length?"Policy":"Policies"]})})]})]}),"manual"===r&&(0,a.jsxs)("form",{onSubmit:$,className:"space-y-6",children:[N&&(0,a.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm",children:N}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Policy Number *"}),(0,a.jsx)("input",{value:Y.policy_number,onChange:e=>G({...Y,policy_number:e.target.value}),className:"input-field",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Written Premium *"}),(0,a.jsx)("input",{type:"number",step:"0.01",value:Y.written_premium,onChange:e=>G({...Y,written_premium:e.target.value}),className:"input-field",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Client Name *"}),(0,a.jsx)("input",{value:Y.client_name,onChange:e=>G({...Y,client_name:e.target.value}),className:"input-field",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Lead Source *"}),(0,a.jsx)("select",{value:Y.lead_source,onChange:e=>G({...Y,lead_source:e.target.value}),className:"input-field",children:((null==n?void 0:n.lead_sources)||[]).map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Policy Type"}),(0,a.jsxs)("select",{value:Y.policy_type,onChange:e=>G({...Y,policy_type:e.target.value}),className:"input-field",children:[(0,a.jsx)("option",{value:"",children:"Select..."}),["auto","home","renters","condo","landlord","umbrella","motorcycle","boat","rv","life","health","bundled","commercial","other"].map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Carrier"}),(0,a.jsxs)("select",{value:Y.carrier,onChange:e=>G({...Y,carrier:e.target.value}),className:"input-field",children:[(0,a.jsx)("option",{value:"",children:"Select carrier..."}),((null==n?void 0:n.carriers)||[]).map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"State"}),(0,a.jsx)("input",{value:Y.state,onChange:e=>G({...Y,state:e.target.value.toUpperCase().slice(0,2)}),className:"input-field",maxLength:2})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Items"}),(0,a.jsx)("input",{type:"number",min:"1",value:Y.item_count,onChange:e=>G({...Y,item_count:parseInt(e.target.value)||1}),className:"input-field"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Email"}),(0,a.jsx)("input",{type:"email",value:Y.client_email,onChange:e=>G({...Y,client_email:e.target.value}),className:"input-field"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Phone"}),(0,a.jsx)("input",{value:Y.client_phone,onChange:e=>G({...Y,client_phone:e.target.value}),className:"input-field"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Notes"}),(0,a.jsx)("textarea",{value:Y.notes,onChange:e=>G({...Y,notes:e.target.value}),className:"input-field",rows:2})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-slate-200",children:[(0,a.jsx)("button",{type:"button",onClick:()=>d("upload"),className:"text-brand-600 hover:text-brand-700 font-semibold text-sm",children:"← Upload PDF instead"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:l,className:"btn-secondary",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:P,className:"btn-primary",children:P?"Creating...":"Create Sale"})]})]})]})]})]})})}}},function(e){e.O(0,[597,228,888,774,179],function(){return e(e.s=3129)}),_N_E=e.O()}]);