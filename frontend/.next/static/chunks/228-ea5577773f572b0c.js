"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[228],{3740:function(e,t,a){var s=a(5893),i=a(7294),o=a(1664),n=a.n(o),r=a(1163),c=a(9835),l=a(123),p=a(9858),m=a(3766),d=a(9525),u=a(66),h=a(5077),g=a(8142),f=a(9455),x=a(7232),y=a(8971),w=a(3742),b=a(8583),v=a(8051);t.Z=()=>{var e,t,a;let{user:o,logout:j}=(0,c.a)(),{theme:k,setTheme:C}=(0,l.Fg)(),N=(0,r.useRouter)(),[z,S]=(0,i.useState)(!1),[T,Z]=(0,i.useState)(!1),F=(0,i.useRef)(null),P=(0,i.useRef)(null),_=(null==o?void 0:null===(e=o.role)||void 0===e?void 0:e.toLowerCase())==="admin",D=(null==o?void 0:null===(t=o.role)||void 0===t?void 0:t.toLowerCase())==="manager"||_;(0,i.useEffect)(()=>{let e=e=>{F.current&&!F.current.contains(e.target)&&S(!1),P.current&&!P.current.contains(e.target)&&Z(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,i.useEffect)(()=>{S(!1)},[N.asPath]);let q=[{href:"/dashboard",label:"Dashboard",icon:(0,s.jsx)(p.Z,{size:16}),show:!0},{href:"/sales",label:"Sales",icon:(0,s.jsx)(m.Z,{size:16}),show:!0},{href:"/quotes",label:"Quotes",icon:(0,s.jsx)(m.Z,{size:16}),show:!0},{href:"/customers",label:"Customers",icon:(0,s.jsx)(d.Z,{size:16}),show:!0},{href:"/analytics",label:"Analytics",icon:(0,s.jsx)(u.Z,{size:16}),show:!0},{href:"/commissions",label:"Commissions",icon:(0,s.jsx)(p.Z,{size:16}),show:!0},{href:"/timeclock",label:"Attendance",icon:(0,s.jsx)(h.Z,{size:16}),show:!0},{href:"/statements",label:"Reconciliation",icon:(0,s.jsx)(g.Z,{size:16}),show:D},{href:"/retention",label:"Retention",icon:(0,s.jsx)(u.Z,{size:16}),show:D},{href:"/admin",label:"Admin",icon:(0,s.jsx)(f.Z,{size:16}),show:_}].filter(e=>e.show),E=(null===(a=q.find(e=>N.asPath.startsWith(e.href)))||void 0===a?void 0:a.label)||"Menu";return(0,s.jsx)("nav",{className:"glass sticky top-0 z-50 border-b border-white/20",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between items-center h-14",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)(n(),{href:"/dashboard",className:"flex items-center space-x-2.5 group flex-shrink-0",children:[(0,s.jsx)("img",{src:"/logo-bci.png",alt:"BCI",className:"h-8 w-auto"}),(0,s.jsx)("span",{className:"font-display font-bold text-base text-brand-900 tracking-tight hidden sm:inline",children:"Better Choice"})]}),o&&(0,s.jsxs)("div",{className:"relative",ref:F,children:[(0,s.jsxs)("button",{onClick:()=>S(!z),className:"flex items-center space-x-1.5 px-3 py-1.5 rounded-lg text-sm font-semibold nav-menu-trigger transition-colors",children:[(0,s.jsx)(x.Z,{size:16}),(0,s.jsx)("span",{children:E}),(0,s.jsx)(y.Z,{size:14,className:"transition-transform ".concat(z?"rotate-180":"")})]}),z&&(0,s.jsx)("div",{className:"absolute left-0 top-full mt-1.5 w-52 rounded-xl shadow-xl border z-[100] overflow-hidden theme-picker-dropdown",children:q.map(e=>{let t=N.asPath.startsWith(e.href);return(0,s.jsxs)(n(),{href:e.href,className:"flex items-center space-x-2.5 px-3 py-2.5 text-sm font-medium transition-colors theme-picker-item ".concat(t?"nav-menu-active":""),children:[(0,s.jsx)("span",{className:"nav-menu-icon",children:e.icon}),(0,s.jsx)("span",{className:"theme-picker-name",children:e.label}),t&&(0,s.jsx)(w.Z,{size:14,className:"ml-auto text-green-500"})]},e.href)})})]})]}),o&&(0,s.jsxs)("div",{className:"flex items-center space-x-1.5",children:[(0,s.jsxs)("div",{className:"relative",ref:P,children:[(0,s.jsx)("button",{onClick:()=>Z(!T),className:"p-2 rounded-lg hover:bg-brand-50 text-slate-500 hover:text-brand-600 transition-colors",title:"Change theme",children:(0,s.jsx)(b.Z,{size:18})}),T&&(0,s.jsxs)("div",{className:"absolute right-0 top-full mt-1.5 w-52 rounded-xl shadow-xl border z-[100] overflow-hidden theme-picker-dropdown",children:[(0,s.jsx)("div",{className:"px-3 py-2 border-b theme-picker-header",children:(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide theme-picker-label",children:"Theme"})}),l.yU.map(e=>(0,s.jsxs)("button",{onClick:()=>{C(e.id),Z(!1)},className:"w-full flex items-center space-x-2.5 px-3 py-2.5 text-left transition-colors theme-picker-item",children:[(0,s.jsx)("span",{className:"w-4 h-4 rounded-full border-2 flex-shrink-0",style:{backgroundColor:e.preview,borderColor:k===e.id?"var(--mc-accent, #3b82f6)":"rgba(128,128,128,0.3)"}}),(0,s.jsx)("div",{className:"flex-1 min-w-0",children:(0,s.jsx)("p",{className:"text-sm font-medium theme-picker-name",children:e.name})}),k===e.id&&(0,s.jsx)(w.Z,{size:14,className:"text-green-500 flex-shrink-0"})]},e.id))]})]}),(0,s.jsxs)("div",{className:"hidden sm:flex items-center space-x-1.5 pl-1.5 border-l nav-divider ml-1",children:[(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-slate-900 leading-tight",children:o.full_name}),(0,s.jsx)("p",{className:"text-xs text-brand-600 capitalize leading-tight",children:o.role})]}),(0,s.jsx)("button",{onClick:j,className:"p-1.5 rounded-lg hover:bg-brand-50 text-slate-500 hover:text-red-500 transition-colors",title:"Logout",children:(0,s.jsx)(v.Z,{size:18})})]}),(0,s.jsx)("button",{onClick:j,className:"sm:hidden p-2 rounded-lg hover:bg-brand-50 text-slate-500 hover:text-red-500 transition-colors",title:"Logout",children:(0,s.jsx)(v.Z,{size:18})})]})]})})})}},8856:function(e,t,a){a.d(t,{Go:function(){return g},JP:function(){return u},Nb:function(){return c},Sb:function(){return m},Tp:function(){return i},X1:function(){return n},fU:function(){return o},id:function(){return d},lq:function(){return l},n9:function(){return r},pR:function(){return h},zG:function(){return p}});let s=a(7066).Z.create({baseURL:"http://localhost:8000"});s.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e});let i={list:e=>s.get("/api/sales/",{params:e}),get:e=>s.get("/api/sales/".concat(e)),create:e=>s.post("/api/sales/",e),createFromPdf:e=>s.post("/api/sales/create-from-pdf",e),update:(e,t)=>s.patch("/api/sales/".concat(e),t),delete:e=>s.delete("/api/sales/".concat(e)),uploadPDF:(e,t)=>{let a=new FormData;return a.append("file",t),s.post("/api/sales/".concat(e,"/upload-application"),a,{headers:{"Content-Type":"multipart/form-data"}})},extractPDF:e=>{let t=new FormData;return t.append("file",e),s.post("/api/sales/extract-pdf",t,{headers:{"Content-Type":"multipart/form-data"},timeout:6e4})},sendForSignature:(e,t)=>{if(t){let a=new FormData;return a.append("file",t),s.post("/api/sales/".concat(e,"/send-for-signature"),a,{headers:{"Content-Type":"multipart/form-data"},timeout:12e4})}return s.post("/api/sales/".concat(e,"/send-for-signature"),{},{timeout:12e4})},signatureStatus:e=>s.get("/api/sales/".concat(e,"/signature-status")),importCSV:e=>{let t=new FormData;return t.append("file",e),s.post("/api/sales/import-csv",t,{headers:{"Content-Type":"multipart/form-data"},timeout:18e4})}},o={calculate:(e,t)=>s.get("/api/commissions/calculate/".concat(e,"/").concat(t)),myCommissions:e=>s.get("/api/commissions/my-commissions",{params:{period:e}}),myTier:()=>s.get("/api/commissions/my-tier"),tiers:()=>s.get("/api/commissions/tiers"),createTier:e=>s.post("/api/commissions/tiers",e)},n={upload:(e,t,a)=>{let i=new FormData;return i.append("file",a),i.append("carrier",e),i.append("period",t),s.post("/api/reconciliation/upload",i,{headers:{"Content-Type":"multipart/form-data"},timeout:6e4})},list:()=>s.get("/api/reconciliation/"),get:e=>s.get("/api/reconciliation/".concat(e)),match:e=>s.post("/api/reconciliation/".concat(e,"/match")),calculate:e=>s.post("/api/reconciliation/".concat(e,"/calculate")),delete:e=>s.delete("/api/reconciliation/".concat(e)),manualMatch:(e,t)=>s.post("/api/reconciliation/lines/".concat(e,"/match?sale_id=").concat(t)),monthlyPay:e=>s.post("/api/reconciliation/monthly-pay/".concat(e)),getMonthlyPay:e=>s.get("/api/reconciliation/monthly-pay/".concat(e)),agentSheet:(e,t,a,i)=>{let o={};return a&&(o.rate_adjustment=a),i&&(o.bonus=i),s.get("/api/reconciliation/agent-sheet/".concat(e,"/").concat(t),{params:Object.keys(o).length?o:void 0})},agentSheetPdfUrl:(e,t)=>"/api/reconciliation/agent-sheet/".concat(e,"/").concat(t,"/pdf")};t.ZP=s;let r={summary:e=>s.get("/api/analytics/summary",{params:e}),byGroup:e=>s.get("/api/analytics/by-group",{params:e}),salesTable:e=>s.get("/api/analytics/sales-table",{params:e}),filterOptions:()=>s.get("/api/analytics/filter-options"),trending:e=>s.get("/api/analytics/trending",{params:e})},c={submit:(e,t)=>s.post("/api/payroll/submit/".concat(e),{agent_overrides:t||{}}),unlock:e=>s.post("/api/payroll/unlock/".concat(e)),markPaid:e=>s.post("/api/payroll/mark-paid/".concat(e)),history:()=>s.get("/api/payroll/history"),detail:e=>s.get("/api/payroll/detail/".concat(e))},l={overview:e=>s.get("/api/retention/overview",{params:e?{period:e}:{}}),byAgent:e=>s.get("/api/retention/by-agent",{params:e?{period:e}:{}}),byCarrier:e=>s.get("/api/retention/by-carrier",{params:e?{period:e}:{}}),bySource:e=>s.get("/api/retention/by-source",{params:e?{period:e}:{}}),trend:e=>s.get("/api/retention/trend",{params:{months:e||6}}),earlyCancellations:(e,t)=>s.get("/api/retention/early-cancellations",{params:{days:e||90,...t?{period:t}:{}}})},p={sendWelcome:(e,t)=>{if(null==t?void 0:t.file){let a=new FormData;return a.append("file",t.file),s.post("/api/survey/send-welcome/".concat(e),a,{headers:{"Content-Type":"multipart/form-data"},timeout:3e4})}return(null==t?void 0:t.attachSavedPdf)?s.post("/api/survey/send-welcome/".concat(e,"?attach_saved_pdf=true"),{},{timeout:3e4}):s.post("/api/survey/send-welcome/".concat(e))},previewEmail:e=>s.get("/api/survey/preview/".concat(e)),responses:()=>s.get("/api/survey/responses"),stats:()=>s.get("/api/survey/stats"),welcomeTemplates:()=>s.get("/api/survey/welcome-templates"),previewTemplate:e=>s.get("/api/survey/welcome-templates/".concat(encodeURIComponent(e),"/preview"))},m={listEmployees:()=>s.get("/api/admin/employees"),createEmployee:e=>s.post("/api/admin/employees",e),updateEmployee:(e,t)=>s.put("/api/admin/employees/".concat(e),t),deleteEmployee:e=>s.delete("/api/admin/employees/".concat(e)),resetPassword:(e,t)=>s.post("/api/admin/employees/".concat(e,"/reset-password"),{new_password:t}),listTiers:()=>s.get("/api/admin/commission-tiers"),createTier:e=>s.post("/api/admin/commission-tiers",e),updateTier:(e,t)=>s.put("/api/admin/commission-tiers/".concat(e),t),deleteTier:e=>s.delete("/api/admin/commission-tiers/".concat(e)),listLeadSources:()=>s.get("/api/admin/lead-sources"),addLeadSource:e=>s.post("/api/admin/lead-sources",e),listCarriers:()=>s.get("/api/admin/carriers"),addCarrier:e=>s.post("/api/admin/carriers",e),deleteCarrier:e=>s.delete("/api/admin/carriers/"+encodeURIComponent(e)),deleteLeadSource:e=>s.delete("/api/admin/lead-sources/"+encodeURIComponent(e)),surveyStats:()=>s.get("/api/admin/survey-stats"),dropdownOptions:()=>s.get("/api/admin/dropdown-options")},d={clockIn:e=>s.post("/api/timeclock/clock-in",null,{params:e||{}}),clockOut:e=>s.post("/api/timeclock/clock-out",null,{params:e||{}}),status:()=>s.get("/api/timeclock/status"),myHistory:e=>s.get("/api/timeclock/my-history",{params:{month:e}}),adminSummary:e=>s.get("/api/timeclock/admin/summary",{params:{month:e}}),adminEmployeeDetail:(e,t)=>s.get("/api/timeclock/admin/employee/".concat(e),{params:{month:t}}),excuse:(e,t)=>s.post("/api/timeclock/admin/excuse/".concat(e),null,{params:{note:t}}),unexcuse:e=>s.post("/api/timeclock/admin/unexcuse/".concat(e))},u={search:e=>s.get("/api/customers/search",{params:e}),get:e=>s.get("/api/customers/".concat(e)),sync:e=>s.post("/api/customers/".concat(e,"/sync")),importFromNowCerts:e=>s.post("/api/customers/import-from-nowcerts",null,{params:{nowcerts_insured_id:e}}),syncAll:()=>s.post("/api/customers/sync-all"),nowcertsStatus:()=>s.get("/api/customers/nowcerts/status"),agencyStats:()=>s.get("/api/customers/agency-stats"),duplicates:()=>s.get("/api/customers/duplicates"),merge:(e,t)=>s.post("/api/customers/merge",null,{params:{keep_id:e,merge_ids:t.join(",")}})},h={upload:async(e,t)=>{let a=new FileReader,s=await new Promise((t,s)=>{a.onload=()=>t(a.result.split(",")[1]),a.onerror=s,a.readAsDataURL(e)}),i=localStorage.getItem("token"),o=await fetch("/api/nonpay-upload?dry_run=".concat(t?"true":"false"),{method:"POST",headers:{"Content-Type":"application/json",...i?{Authorization:"Bearer ".concat(i)}:{}},body:JSON.stringify({filename:e.name,data:s})}),n=await o.json();if(!o.ok)throw{response:{status:o.status,data:n}};return{data:n}},history:e=>s.get("/api/nonpay/history",{params:{limit:e||20}}),emails:e=>s.get("/api/nonpay/emails",{params:{policy_number:e}}),carriers:()=>s.get("/api/nonpay/carriers"),preview:e=>s.get("/api/nonpay/preview",{params:e}),sendTest:e=>s.post("/api/nonpay/send-test",null,{params:e})},g={list:e=>s.get("/api/quotes/",{params:e}),get:e=>s.get("/api/quotes/".concat(e)),extractPDF:e=>{let t=new FormData;return t.append("file",e),s.post("/api/quotes/extract-pdf",t,{headers:{"Content-Type":"multipart/form-data"},timeout:6e4})},create:e=>s.post("/api/quotes/",e),update:(e,t)=>s.patch("/api/quotes/".concat(e),t),uploadPDF:(e,t)=>{let a=new FormData;return a.append("file",t),s.post("/api/quotes/".concat(e,"/upload-pdf"),a,{headers:{"Content-Type":"multipart/form-data"}})},sendEmail:(e,t)=>s.post("/api/quotes/".concat(e,"/send-email"),t||{}),markConverted:(e,t)=>s.post("/api/quotes/".concat(e,"/mark-converted"),null,{params:t?{sale_id:t}:{}}),markLost:(e,t)=>s.post("/api/quotes/".concat(e,"/mark-lost"),null,{params:{reason:t||"unknown"}}),checkFollowups:()=>s.post("/api/quotes/check-followups"),stats:()=>s.get("/api/quotes/stats/summary")}}}]);